{"version":3,"file":"delete_task.min.js","sources":["../src/delete_task.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module to delete task\n *\n * @module     tool_resendnewaccountemail\n * @copyright  2023 Daniel Neis Araujo\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport jQuery from 'jquery';\nimport Ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Url from 'core/url';\nimport {get_string as getString} from 'core/str';\n\n/**\n * Initialize delete task form as SAVE_CANCEL form.\n */\nexport const initModal = () => {\n\n    var DELETE_TASK = '[data-action=deletetask]';\n\n    jQuery(DELETE_TASK).click(function(e) {\n        e.preventDefault();\n        var taskId = jQuery(this).data('id');\n        var nextRunTime = jQuery(this).data('nextruntime');\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: getString('deletetask', 'tool_resendnewaccountemail'),\n            body:  getString('deletetaskconfirm', 'tool_resendnewaccountemail', nextRunTime),\n        })\n        .then(function(modal) {\n            modal.setSaveButtonText(getString('delete'));\n            var root = modal.getRoot();\n            root.on(ModalEvents.save, function() {\n                var request = {\n                    methodname: 'tool_resendnewaccountemail_delete_task',\n                    args: {\n                        id: taskId,\n                    }\n                };\n                Ajax.call([request])[0].then(function() {\n                    window.location.href = Url.relativeUrl('admin/tool/resendnewaccountemail/index.php', null, false);\n                }).fail(Notification.exception);\n            });\n            modal.show();\n        });\n    });\n};\n\n"],"names":["click","e","preventDefault","taskId","this","data","nextRunTime","create","type","ModalFactory","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","getRoot","on","ModalEvents","save","request","methodname","args","id","call","window","location","href","Url","relativeUrl","fail","Notification","exception","show"],"mappings":";;;;;;;kUAgCyB,yBAEH,4BAEEA,OAAM,SAASC,GAC/BA,EAAEC,qBACEC,QAAS,mBAAOC,MAAMC,KAAK,MAC3BC,aAAc,mBAAOF,MAAMC,KAAK,sCACvBE,OAAO,CAChBC,KAAMC,uBAAaC,MAAMC,YACzBC,OAAO,mBAAU,aAAc,8BAC/BC,MAAO,mBAAU,oBAAqB,6BAA8BP,eAEvEQ,MAAK,SAASC,OACXA,MAAMC,mBAAkB,mBAAU,WACvBD,MAAME,UACZC,GAAGC,sBAAYC,MAAM,eAClBC,QAAU,CACVC,WAAY,yCACZC,KAAM,CACFC,GAAIrB,uBAGPsB,KAAK,CAACJ,UAAU,GAAGP,MAAK,WACzBY,OAAOC,SAASC,KAAOC,aAAIC,YAAY,6CAA8C,MAAM,MAC5FC,KAAKC,aAAaC,cAEzBlB,MAAMmB"}